# Chapter 2 构建工具——CMAKE使用指南

## 简介

CMake是一个开源的C++构建工具，

> ## CMAKE基础行为准则(应该避免此类行为)
>
> 1. **不要使用带有全局作用域的函数**，例如 `link_directories`、 `include_libraries` 等相似的函数。
> 2. **不要添加非必要的PUBLIC要求**：对于一些不必要的东西，应该将其声明为 `PRIVATE `而不是 `PUBLIC`
> 3. **不要在file函数中添加GLOB文件**： 如果不重新运行CMake，Make或者其他工具将不会知道你是否添加了某个文件。
> 4. **将库直接链接到需要构建的目标上**：如果可以的话，应该使用显式地链接到目标上
> 5. **当链接库文件时，不要省略PUBLIC或者PRIVATE关键字**：防止因为缺省导致后续所有链接都是缺省
>
> ## CMAKE应当遵守的规范
>
> 1. **把CMake程序视作代码**：应当是整洁并且可读的。
> 2. **建立目标的观念**
> 3. **应当使用接口进行导出**
> 4. **为库书写一个 `Config.cmake`文件**。这是库作者支持客户端体验而应该做的
> 5. **声明一个ALIAS目标以保持使用的一致性**：使用 `add_subdiractiory`和 `find_package`应该提供相同的目标和命名空间。
> 6. **将常见的功能合并到有详细文档的函数或者宏中**
> 7. **使用小写的函数名**:CMake 的函数和宏的名字可以定义为大写或小写，但是一般都使用小写，变量名用大写。
> 8. **使用 `cmake_policy` 和/或 限定版本号范围**
